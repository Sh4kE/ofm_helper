{% extends "core/base.html" %}

{% block content %}

    {% load staticfiles %}

    <h1 class="page-header">Deine Stadionstatistik</h1>

    <div id="table-toolbar">
        <div class="form-inline" role="form">
            <div class="form-group">
                <label id="strength-slider-label" for="strength-slider" data-toggle="tooltip" data-placement="top" >Stärke: </label>
                <input id="strength-slider" data-provide="slider" data-slider-max="300" data-slider-value="[{{slider_min}},{{slider_max}}]" data-slider-step="5" type="text"/>

                <label id="tolerance-slider-label" for="tolerance-slider" data-toggle="tooltip" data-placement="top">Toleranz: </label>
                <input id="tolerance-slider" data-provide="slider" data-slider-max="50" data-slider-value="{{tolerance}}" data-slider-step="1" type="text"/>
            </div>
        </div>

        <div id="StadiumConfigFilter" class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Filter nach Stadium-Ausbaustufe <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            {% for s in stadium_configurations %}
                 <li><a href="#">
                    <span class="stadium_config_general flaticon-football-court-illumination-lamps"></span> {{s.light}}
                    <span class="stadium_config_general flaticon-football-game-on-tv"></span> {{s.screen}}
                    <img class="stadium_config_general" src="{% static 'core/img/parking.svg' %}" height="16px"/> {{s.parking}}
                    <span class="stadium_config_general flaticon-football-badge"></span> {{s.security}}
                    &nbsp;&nbsp;<span class="separator">|</span>&nbsp;&nbsp;
                    <span class="stand_filter_data">
                        Nord: {% spaceless %}
                        {% if s.north_capacity < 10000 %}<span class="invisible">0</span>{% endif %}
                        {% if s.north_capacity < 1000 %}<span class="invisible">0</span>{% endif %}
                        {% if s.north_capacity < 100 %}<span class="invisible">0</span>{% endif %}
                        {% if s.north_capacity < 10 %}<span class="invisible">0</span>{% endif %}
                        {% endspaceless %}{{s.north_capacity}}
                        <img src="{% static 'core/img/roof.svg' %}" height="16px" class="{% if not s.north_has_roof %}invisible{% endif %}"/>
                        <span class="{% if not s.north_has_seats %}invisible{% endif %}">&#128186;</span>
                    </span>
                    <span class="separator">|</span>
                    <span class="stand_filter_data">
                        Süd: {% spaceless %}
                        {% if s.south_capacity < 10000 %}<span class="invisible">0</span>{% endif %}
                        {% if s.south_capacity < 1000 %}<span class="invisible">0</span>{% endif %}
                        {% if s.south_capacity < 100 %}<span class="invisible">0</span>{% endif %}
                        {% if s.south_capacity < 10 %}<span class="invisible">0</span>{% endif %}
                        {% endspaceless %}{{s.south_capacity}}
                        <img src="{% static 'core/img/roof.svg' %}" height="16px" class="{% if not s.south_has_roof %}invisible{% endif %}"/>
                        <span class="{% if not s.south_has_seats %}invisible{% endif %}">&#128186;</span>
                    </span>
                    <span class="separator">|</span>
                    <span class="stand_filter_data">
                        West: {% spaceless %}
                        {% if s.west_capacity < 10000 %}<span class="invisible">0</span>{% endif %}
                        {% if s.west_capacity < 1000 %}<span class="invisible">0</span>{% endif %}
                        {% if s.west_capacity < 100 %}<span class="invisible">0</span>{% endif %}
                        {% if s.west_capacity < 10 %}<span class="invisible">0</span>{% endif %}
                        {% endspaceless %}{{s.west_capacity}}
                        <img src="{% static 'core/img/roof.svg' %}" height="16px" class="{% if not s.west_has_roof %}invisible{% endif %}"/>
                        <span class="{% if not s.west_has_seats %}invisible{% endif %}">&#128186;</span>
                    </span>
                    <span class="separator">|</span>
                    <span class="stand_filter_data">
                        Ost: {% spaceless %}
                        {% if s.east_capacity < 10000 %}<span class="invisible">0</span>{% endif %}
                        {% if s.east_capacity < 1000 %}<span class="invisible">0</span>{% endif %}
                        {% if s.east_capacity < 100 %}<span class="invisible">0</span>{% endif %}
                        {% if s.east_capacity < 10 %}<span class="invisible">0</span>{% endif %}
                        {% endspaceless %}{{s.east_capacity}}
                        <img src="{% static 'core/img/roof.svg' %}" height="16px" class="{% if not s.east_has_roof %}invisible{% endif %}"/>
                        <span class="{% if not s.east_has_seats %}invisible{% endif %}">&#128186;</span>
                    </span>
                </a></li>
            {% endfor %}
          </ul>
        </div>
    </div>

    <table id='stadium_statistics_table' class="table table-bordered table-striped table-hover statistics_table"
           data-toolbar="#table-toolbar"
           data-toggle="table"
           data-search="true"
           data-show-refresh="true"
           data-show-columns="true"
           data-query-params="queryParams"
           data-url="{% url 'core:ofm:stadium_statistics_overview_json' %}">
        <thead id="stadium_statistics_table_head">
            <tr>
                <th data-field="season" data-sortable="true"><span class="glyphicon glyphicon-calendar"></span></th>
                <th data-field="matchday" data-sortable="false"><span class="glyphicon glyphicon-calendar"></span></th>
                <th data-field="capacity" data-sortable="true" data-formatter="numberFormatter"><span class="flaticon-football-fan-with-facepaint"></span> Kapazität</th>
                <th data-field="visitors" data-sortable="true" data-formatter="numberFormatter"><span class="flaticon-football-fan-with-facepaint"></span> Zuschauer</th>
                <th data-field="workload" data-sortable="true"><span class="flaticon-football-fan-with-facepaint"></span> Auslastung</th>
                <th data-field="home_strength" data-sortable="true"><span class="glyphicon glyphicon-home"></span> Stärke</th>
                <th data-field="guest_strength" data-sortable="true"><img src="{% static 'core/img/bus.svg' %}" height="16px"/> Stärke</th>
                <th data-field="harmonic_strength" data-sortable="true" data-formatter="numberFormatter" title="Harmonisches Mittel der Mannschaftsstärken">Gemittelte Stärke</th>
                <th data-field="earnings" data-sortable="true" data-formatter="moneyFormatter"><span class="glyphicon glyphicon-euro"></span> Einnahmen</th>
                <th data-field="light_level" data-sortable="false" data-visible="false"><span class="flaticon-football-court-illumination-lamps"></span> Flutlicht</th>
                <th data-field="security_level" data-sortable="false" data-visible="false"><span class="flaticon-football-badge"></span> Sicherheit</th>
                <th data-field="screen_level" data-sortable="false" data-visible="false"><span class="flaticon-football-game-on-tv"></span> Anzeigetafel</th>
                <th data-field="parking_level" data-sortable="false" data-visible="false"><img src="{% static 'core/img/parking.svg' %}" height="16px"/> Parkplätze</th>
            </tr>
        </thead>
    </table>

    <script>
        var JSON_URL = '{% url 'core:ofm:stadium_statistics_overview_json' %}';
    </script>

    <script src="{% static 'core/js/strength_slider.js' %}"></script>
    <script src="{% static 'core/js/table_formats.js' %}"></script>

{% endblock %}
